# CSAPP

## 未独立完成的lab部分思路记录

### data-lab

```C
int howManyBits(int x) {
	int sign = x >> 31;
	// 如果是负数就取反，正数就不变
	// 最后将所得到的位数加上符号位这一位即可
	x = x ^ sign;

	int b16 = (!!(x >> 16)) << 4; // 如果高16位有1，那么就说明至少需要16位，没1结果就是0
	x = x >> b16; // 如果至少需要16位，那我们只需要再判断高16位；如果不需要，那我们依旧判断低16位

	// 下面同理
	int b8 = (!!(x >> 8)) << 3;
	x = x >> b8;

	int b4 = (!!(x >> 4)) << 2;
	x = x >> b4;

	int b2 = (!!(x >> 2)) << 1;
	x = x >> b2;

	int b1 = (!!(x >> 1));
	x = x >> b1;

	int b0 = x;
	
	return b16 + b8 + b4 + b2 + b1 + b0 + 1;
}
```

