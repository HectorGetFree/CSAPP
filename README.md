# CSAPP

## æœªç‹¬ç«‹å®Œæˆçš„labéƒ¨åˆ†æ€è·¯è®°å½•

### data-lab

æ³¨æ„âš ï¸ï¼šæœ¬labä¸­çš„Cä»£ç ä¸º`C90/C89`æ ‡å‡†,æ‰€æœ‰å˜é‡å£°æ˜å¿…é¡»æ”¾åœ¨å‡½æ•°æˆ–ä»£ç å—çš„å¼€å¤´ï¼Œä¸”ä¸èƒ½åœ¨ä»£ç ä¸­å‡ºç°`0b`æ ‡è¯†çš„äºŒè¿›åˆ¶å¸¸æ•°ï¼Œå¦åˆ™å°½ç®¡å¯ä»¥é€šè¿‡æµ‹è¯•ï¼Œä½†æ˜¯`./dlc bits.c`è§„èŒƒä¼šæç¤º`parse error`æˆ–è€…å˜é‡å`undeclared`,æ­¤å¤–ä¹Ÿä¸è¦å‡ºç°æ²¡æœ‰ä½¿ç”¨è¿‡çš„å˜é‡

#### `int howManyBits(int x)`

```C
int howManyBits(int x) {
	int sign = x >> 31;
	// å¦‚æœæ˜¯è´Ÿæ•°å°±å–åï¼Œæ­£æ•°å°±ä¸å˜
	// æœ€åå°†æ‰€å¾—åˆ°çš„ä½æ•°åŠ ä¸Šç¬¦å·ä½è¿™ä¸€ä½å³å¯
	x = x ^ sign;

	int b16 = (!!(x >> 16)) << 4; // å¦‚æœé«˜16ä½æœ‰1ï¼Œé‚£ä¹ˆå°±è¯´æ˜è‡³å°‘éœ€è¦16ä½ï¼Œæ²¡1ç»“æœå°±æ˜¯0
	x = x >> b16; // å¦‚æœè‡³å°‘éœ€è¦16ä½ï¼Œé‚£æˆ‘ä»¬åªéœ€è¦å†åˆ¤æ–­é«˜16ä½ï¼›å¦‚æœä¸éœ€è¦ï¼Œé‚£æˆ‘ä»¬ä¾æ—§åˆ¤æ–­ä½16ä½

	// ä¸‹é¢åŒç†
	int b8 = (!!(x >> 8)) << 3;
	x = x >> b8;

	int b4 = (!!(x >> 4)) << 2;
	x = x >> b4;

	int b2 = (!!(x >> 2)) << 1;
	x = x >> b2;

	int b1 = (!!(x >> 1));
	x = x >> b1;

	int b0 = x;
	
	return b16 + b8 + b4 + b2 + b1 + b0 + 1;
}
```

#### `unsigned floatPower2(int x)`

è¿™ä¸ªpuzzleæœ¬ğŸ‰‘æ²¡æœ‰é€šè¿‡ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´åœ¨æµ‹è¯•æ—¶é™·å…¥äº†æ— é™å¾ªç¯

ä½†æ˜¯ä¾ç„¶åœ¨è¿™é‡Œåˆ—å‡ºæ€è·¯ï¼Œä»¥ä¾¿åç»­çš„æ›´æ­£

é¦–å…ˆï¼Œé¢˜ç›®è¦æ±‚çš„æ˜¯2.0^x^ ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®xçš„èŒƒå›´å’ŒIEEE754æ ‡å‡†è¿›è¡Œåˆ†ç±»å’Œæ¯”å¯¹

|       x < -149        | ä¹Ÿå°±æ˜¯è¶…è¿‡äº†éè§„æ ¼æ•°èƒ½è¡¨ç¤ºçš„æœ€å°çš„2çš„å¹‚ | åœ¨éè§„æ ¼æ•°çš„æ ¼å¼ä¸‹ï¼Œ2çš„å¹‚ç”±fracå†³å®šï¼Œfracæœ€å°ä¸º0x000001å³ä¸º2^-23^ï¼Œæ•…èƒ½è¡¨ç¤ºçš„æœ€å°çš„2çš„å¹‚ä¸º2^-126-23^ å³2^-149^ |
| :-------------------: | --------------------------------------- | ------------------------------------------------------------ |
| **-149 <= x <= -126** | **ç”¨éè§„æ ¼æ•°è¿›è¡Œè¡¨ç¤º**                  |                                                              |
|  **-126 < x <= 127**  | **ç”¨è§„æ ¼æ•°è¿›è¡Œè¡¨ç¤º**                    | **åœ¨è§„æ ¼åŒ–ä¸‹ï¼Œ2.0çš„æµ®ç‚¹è¡¨ç¤ºä¸­exp=0b1000 0000ï¼Œè¦è¿›è¡Œå¹‚è¿ç®—ï¼Œåªéœ€è¦åœ¨expä¸ŠåŠ ä¸Šç›¸åº”çš„æŒ‡æ•°ï¼Œä¹Ÿå°±æ˜¯exp=127 + xï¼Œå…¶ä½™çš„ä½éƒ½æ˜¯0** |
|      **x > 127**      | **ç¬¬ä¸‰ç±»è¡¨ç¤ºæ³•**                        | **è¶…è¿‡äº†èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼Œè¿”å›0x7f800000**                     |

####  è¯„åˆ†ä¸€è§ˆ

```bash
Correctness Results     Perf Results
Points  Rating  Errors  Points  Ops     Puzzle
1       1       0       2       7       bitXor
1       1       0       2       1       tmin
1       1       0       2       10      isTmax
2       2       0       2       10      allOddBits
2       2       0       2       2       negate
3       3       0       2       11      isAsciiDigit
3       3       0       2       7       conditional
3       3       0       2       15      isLessOrEqual
4       4       0       2       9       logicalNeg
4       4       0       2       32      howManyBits
4       4       0       2       16      floatScale2
4       4       0       2       25      floatFloat2Int
0       0       0       0       0
0       0       0       0       0       10
0       4       1       0       9       floatPower2

Score = 56/62 [32/36 Corr + 24/26 Perf] (154 total operators)
```

